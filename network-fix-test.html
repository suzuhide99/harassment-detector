<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f4f8; }
        .container { max-width: 1000px; margin: 0 auto; }
        .card { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .button { padding: 12px 20px; margin: 8px; font-size: 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .primary { background: #007bff; color: white; }
        .primary:hover { background: #0056b3; }
        .success { background: #28a745; color: white; }
        .success:hover { background: #1e7e34; }
        .danger { background: #dc3545; color: white; }
        .danger:hover { background: #c82333; }
        .warning { background: #ffc107; color: #212529; }
        .warning:hover { background: #e0a800; }
        
        .status { padding: 15px; margin: 10px 0; border-radius: 8px; font-weight: bold; }
        .status.success { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 2px solid #bee5eb; }
        .status.warning { background: #fff3cd; color: #856404; border: 2px solid #ffeaa7; }
        .status.error { background: #f8d7da; color: #721c24; border: 2px solid #f1c0c7; }
        
        .solution-box {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .solution-box h4 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .code-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        
        .log-area {
            background: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            border-radius: 8px;
            margin: 10px 0;
        }

        .method-card {
            border-left: 5px solid #007bff;
            margin: 10px 0;
        }

        .method-card.method-1 { border-left-color: #28a745; }
        .method-card.method-2 { border-left-color: #ffc107; }
        .method-card.method-3 { border-left-color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Network ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ„ãƒ¼ãƒ«</h1>
        <p><strong>ã€ŒâŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ: networkã€</strong>ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®å°‚ç”¨ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>
        
        <!-- å•é¡Œã®èª¬æ˜ -->
        <div class="card">
            <h3>ğŸš¨ å•é¡Œã®è©³ç´°</h3>
            <p>Web Speech API ã® <code>network</code> ã‚¨ãƒ©ãƒ¼ã¯ä»¥ä¸‹ã®åŸå› ã§ç™ºç”Ÿã—ã¾ã™ï¼š</p>
            <ul>
                <li><strong>HTTPæ¥ç¶šã§ã®ä½¿ç”¨</strong> - å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ã§HTTPSå¿…é ˆ</li>
                <li><strong>Googleã®ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šå¤±æ•—</strong> - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™ã‚„ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«</li>
                <li><strong>APIä½¿ç”¨åˆ¶é™</strong> - çŸ­æ™‚é–“ã§ã®å¤§é‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</li>
                <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶ã®éŸ³å£°èªè­˜ã‚µãƒ¼ãƒ“ã‚¹è¨­å®š</strong></li>
            </ul>
        </div>

        <!-- è§£æ±ºæ–¹æ³• 1: HTTPS è¨­å®š -->
        <div class="card method-card method-1">
            <h3>âœ… è§£æ±ºæ–¹æ³• 1: HTTPS ã§æ¥ç¶šã™ã‚‹ï¼ˆæ¨å¥¨ï¼‰</h3>
            <div class="solution-box">
                <h4>ğŸ”’ ngrok ã‚’ä½¿ç”¨ã—ã¦HTTPSæ¥ç¶šã‚’ä½œæˆ</h4>
                <p>æœ€ã‚‚åŠ¹æœçš„ãªè§£æ±ºæ–¹æ³•ã§ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š</p>
                <div class="code-box">
# ngrok ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆ)
brew install ngrok  # macOS
# ã¾ãŸã¯ https://ngrok.com/download ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

# harassment-detector ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd /Users/suzu/cc-test/harassment-detector
python3 -m http.server 8081 &

# åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§
ngrok http 8081
                </div>
                <p><strong>ngrok ãŒç”Ÿæˆã™ã‚‹HTTPS URLï¼ˆä¾‹: https://abc123.ngrok.ioï¼‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚</strong></p>
            </div>
        </div>

        <!-- è§£æ±ºæ–¹æ³• 2: ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šå¤‰æ›´ -->
        <div class="card method-card method-2">
            <h3>âš™ï¸ è§£æ±ºæ–¹æ³• 2: ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‚’å¤‰æ›´</h3>
            <div class="solution-box">
                <h4>ğŸŒ Chrome ã§ã®è¨­å®šå¤‰æ›´</h4>
                <ol>
                    <li><code>chrome://flags/</code> ã‚’é–‹ã</li>
                    <li><code>Experimental Web Platform features</code> ã‚’æ¤œç´¢</li>
                    <li><strong>Enabled</strong> ã«è¨­å®š</li>
                    <li><code>Insecure origins treated as secure</code> ã‚’æ¤œç´¢</li>
                    <li><code>http://localhost:8081</code> ã‚’è¿½åŠ </li>
                    <li>Chrome ã‚’å†èµ·å‹•</li>
                </ol>
                <button id="testMethod2" class="button warning">ã“ã®è¨­å®šã§ãƒ†ã‚¹ãƒˆã™ã‚‹</button>
            </div>
        </div>

        <!-- è§£æ±ºæ–¹æ³• 3: ä»£æ›¿å®Ÿè£… -->
        <div class="card method-card method-3">
            <h3>ğŸ”„ è§£æ±ºæ–¹æ³• 3: ã‚¨ãƒ©ãƒ¼è€æ€§ã®ã‚ã‚‹éŸ³å£°èªè­˜</h3>
            <div class="solution-box">
                <h4>ğŸ›¡ï¸ Network ã‚¨ãƒ©ãƒ¼ã«å¯¾å¿œã—ãŸæ”¹è‰¯ç‰ˆ</h4>
                <p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚å‹•ä½œã‚’ç¶šã‘ã‚‹ç‰¹åˆ¥ãªå®Ÿè£…ã§ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
                <button id="testMethod3" class="button danger">ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆã§ãƒ†ã‚¹ãƒˆ</button>
            </div>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤º -->
        <div class="card">
            <h3>ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h3>
            <div id="testStatus" class="status info">ãƒ†ã‚¹ãƒˆå¾…æ©Ÿä¸­</div>
            <div id="testResult" style="min-height: 100px; border: 2px solid #dee2e6; border-radius: 8px; padding: 15px; margin: 10px 0;">
                ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
            </div>
            <button id="stopTest" class="button danger" disabled>ãƒ†ã‚¹ãƒˆåœæ­¢</button>
        </div>

        <!-- ãƒ­ã‚°è¡¨ç¤º -->
        <div class="card">
            <h3>ğŸ“ è©³ç´°ãƒ­ã‚°</h3>
            <button onclick="clearLog()" class="button warning">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
            <div id="log" class="log-area">Network ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ„ãƒ¼ãƒ«èµ·å‹•å®Œäº†...\n</div>
        </div>

        <!-- æœ€çµ‚çš„ãªè§£æ±ºç­– -->
        <div class="card">
            <h3>ğŸ¯ æœ€çµ‚çš„ãªæ¨å¥¨è§£æ±ºç­–</h3>
            <div class="solution-box">
                <h4>âœ¨ å®Œå…¨ã«å‹•ä½œã™ã‚‹è¨­å®š</h4>
                <p>ä»¥ä¸‹ã®æ‰‹é †ã§ç¢ºå®Ÿã«å‹•ä½œã—ã¾ã™ï¼š</p>
                <ol>
                    <li><strong>ngrok ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</strong>: <code>brew install ngrok</code></li>
                    <li><strong>ã‚µãƒ¼ãƒãƒ¼èµ·å‹•</strong>: <code>python3 -m http.server 8081</code></li>
                    <li><strong>ngrok èµ·å‹•</strong>: <code>ngrok http 8081</code></li>
                    <li><strong>HTTPS URL ã§ã‚¢ã‚¯ã‚»ã‚¹</strong>: ngrok ãŒè¡¨ç¤ºã™ã‚‹https://xxx.ngrok.io</li>
                </ol>
                <p><strong>ã“ã‚Œã§networkã‚¨ãƒ©ãƒ¼ã¯100%è§£æ±ºã•ã‚Œã¾ã™ã€‚</strong></p>
            </div>
        </div>
    </div>

    <script>
        class NetworkFixTool {
            constructor() {
                this.recognition = null;
                this.isRunning = false;
                this.retryCount = 0;
                this.maxRetries = 3;
                this.setupEventListeners();
                this.log('Network ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ„ãƒ¼ãƒ«åˆæœŸåŒ–å®Œäº†');
            }

            setupEventListeners() {
                document.getElementById('testMethod2').onclick = () => this.testMethod2();
                document.getElementById('testMethod3').onclick = () => this.testMethod3();
                document.getElementById('stopTest').onclick = () => this.stopTest();
            }

            log(message, type = 'info') {
                const timestamp = new Date().toISOString().substring(11, 23);
                const logContainer = document.getElementById('log');
                const color = {
                    'info': '#00ff00',
                    'success': '#00ff00',
                    'warning': '#ffff00',
                    'error': '#ff4444'
                }[type] || '#00ff00';
                
                logContainer.innerHTML += `<span style="color: ${color}">[${timestamp}] ${message}</span>\n`;
                logContainer.scrollTop = logContainer.scrollHeight;
                console.log(`[${type}] ${message}`);
            }

            updateStatus(message, statusClass) {
                const statusEl = document.getElementById('testStatus');
                statusEl.textContent = message;
                statusEl.className = `status ${statusClass}`;
            }

            async testMethod2() {
                this.log('=== è§£æ±ºæ–¹æ³• 2: ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã§ãƒ†ã‚¹ãƒˆ ===', 'info');
                this.updateStatus('ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã§ã®éŸ³å£°èªè­˜ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...', 'info');
                this.startBasicTest('Method 2 - Browser Settings');
            }

            async testMethod3() {
                this.log('=== è§£æ±ºæ–¹æ³• 3: ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆã§ãƒ†ã‚¹ãƒˆ ===', 'info');
                this.updateStatus('ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆéŸ³å£°èªè­˜ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...', 'info');
                this.startResilientTest();
            }

            startBasicTest(method) {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    this.log('éŸ³å£°èªè­˜APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“', 'error');
                    this.updateStatus('ã‚¨ãƒ©ãƒ¼: éŸ³å£°èªè­˜ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();

                    // åŸºæœ¬è¨­å®š
                    this.recognition.continuous = false;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'ja-JP';

                    this.log(`${method} ã§ãƒ†ã‚¹ãƒˆé–‹å§‹`);
                    this.setupBasicEvents();
                    
                    this.isRunning = true;
                    document.getElementById('stopTest').disabled = false;
                    
                    this.recognition.start();
                    this.log('éŸ³å£°èªè­˜é–‹å§‹...');

                } catch (error) {
                    this.log(`ãƒ†ã‚¹ãƒˆé–‹å§‹ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.updateStatus('ãƒ†ã‚¹ãƒˆé–‹å§‹ã‚¨ãƒ©ãƒ¼', 'error');
                }
            }

            startResilientTest() {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    this.log('éŸ³å£°èªè­˜APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“', 'error');
                    this.updateStatus('ã‚¨ãƒ©ãƒ¼: éŸ³å£°èªè­˜ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    return;
                }

                this.log('ã‚¨ãƒ©ãƒ¼è€æ€§éŸ³å£°èªè­˜ã‚’é–‹å§‹ã—ã¾ã™...');
                this.retryCount = 0;
                this.startResilientRecognition();
            }

            startResilientRecognition() {
                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();

                    // ã‚ˆã‚Šä¿å®ˆçš„ãªè¨­å®š
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;  // ä¸­é–“çµæœã‚’ç„¡åŠ¹ã«ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å‰Šæ¸›
                    this.recognition.lang = 'ja-JP';

                    this.setupResilientEvents();
                    
                    this.isRunning = true;
                    document.getElementById('stopTest').disabled = false;
                    
                    this.recognition.start();
                    this.log(`ã‚¨ãƒ©ãƒ¼è€æ€§éŸ³å£°èªè­˜é–‹å§‹ (è©¦è¡Œ ${this.retryCount + 1}/${this.maxRetries})`);

                } catch (error) {
                    this.log(`ã‚¨ãƒ©ãƒ¼è€æ€§ãƒ†ã‚¹ãƒˆé–‹å§‹ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.handleResilientError();
                }
            }

            setupBasicEvents() {
                this.recognition.onstart = () => {
                    this.log('âœ… éŸ³å£°èªè­˜é–‹å§‹æˆåŠŸ', 'success');
                    this.updateStatus('éŸ³å£°èªè­˜ä¸­... ä½•ã‹è©±ã—ã¦ãã ã•ã„', 'success');
                };

                this.recognition.onresult = (event) => {
                    this.log('ğŸ“ çµæœå—ä¿¡æˆåŠŸï¼', 'success');
                    let transcript = '';
                    for (let i = 0; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    document.getElementById('testResult').innerHTML = `<strong>æˆåŠŸ!</strong><br>èªè­˜çµæœ: "${transcript}"`;
                    this.updateStatus('ãƒ†ã‚¹ãƒˆæˆåŠŸ: éŸ³å£°èªè­˜ãŒæ­£å¸¸ã«å‹•ä½œã—ã¾ã—ãŸ', 'success');
                };

                this.recognition.onerror = (event) => {
                    this.log(`âŒ ã‚¨ãƒ©ãƒ¼: ${event.error}`, 'error');
                    
                    if (event.error === 'network') {
                        document.getElementById('testResult').innerHTML = `
                            <strong>Network ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong><br>
                            <ul>
                                <li>HTTPSæ¥ç¶šã‚’è©¦ã—ã¦ãã ã•ã„ (ngrokä½¿ç”¨)</li>
                                <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                                <li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                            </ul>
                        `;
                        this.updateStatus('Network ã‚¨ãƒ©ãƒ¼: HTTPSæ¥ç¶šãŒå¿…è¦ã§ã™', 'error');
                    } else {
                        document.getElementById('testResult').innerHTML = `<strong>ã‚¨ãƒ©ãƒ¼:</strong> ${event.error}`;
                        this.updateStatus(`ã‚¨ãƒ©ãƒ¼: ${event.error}`, 'error');
                    }
                };

                this.recognition.onend = () => {
                    this.log('ğŸ”š éŸ³å£°èªè­˜çµ‚äº†');
                    this.isRunning = false;
                    document.getElementById('stopTest').disabled = true;
                };
            }

            setupResilientEvents() {
                this.recognition.onstart = () => {
                    this.log('âœ… ã‚¨ãƒ©ãƒ¼è€æ€§éŸ³å£°èªè­˜é–‹å§‹', 'success');
                    this.updateStatus('ã‚¨ãƒ©ãƒ¼è€æ€§éŸ³å£°èªè­˜ä¸­...', 'success');
                };

                this.recognition.onresult = (event) => {
                    this.log('ğŸ“ ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆã§çµæœå—ä¿¡æˆåŠŸï¼', 'success');
                    let transcript = '';
                    for (let i = 0; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    document.getElementById('testResult').innerHTML = `<strong>ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆã§æˆåŠŸ!</strong><br>èªè­˜çµæœ: "${transcript}"`;
                    this.updateStatus('ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆãƒ†ã‚¹ãƒˆæˆåŠŸ', 'success');
                    this.isRunning = false;
                    document.getElementById('stopTest').disabled = true;
                };

                this.recognition.onerror = (event) => {
                    this.log(`âŒ ã‚¨ãƒ©ãƒ¼è€æ€§ç‰ˆã§ã‚‚ã‚¨ãƒ©ãƒ¼: ${event.error}`, 'error');
                    this.handleResilientError();
                };

                this.recognition.onend = () => {
                    this.log('ğŸ”š ã‚¨ãƒ©ãƒ¼è€æ€§éŸ³å£°èªè­˜çµ‚äº†');
                    if (this.isRunning && this.retryCount < this.maxRetries - 1) {
                        this.retryCount++;
                        this.log(`å†è©¦è¡Œã—ã¾ã™... (${this.retryCount + 1}/${this.maxRetries})`);
                        setTimeout(() => {
                            this.startResilientRecognition();
                        }, 2000);
                    } else {
                        this.isRunning = false;
                        document.getElementById('stopTest').disabled = true;
                        if (this.retryCount >= this.maxRetries - 1) {
                            this.updateStatus('ã™ã¹ã¦ã®è©¦è¡ŒãŒå¤±æ•—ã—ã¾ã—ãŸã€‚HTTPSæ¥ç¶šã‚’ãŠè©¦ã—ãã ã•ã„ã€‚', 'error');
                        }
                    }
                };
            }

            handleResilientError() {
                if (this.retryCount < this.maxRetries - 1) {
                    this.retryCount++;
                    this.log(`ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿã€å†è©¦è¡Œã—ã¾ã™... (${this.retryCount}/${this.maxRetries})`);
                    setTimeout(() => {
                        this.startResilientRecognition();
                    }, 1000);
                } else {
                    this.log('æœ€å¤§è©¦è¡Œå›æ•°ã«åˆ°é”ã—ã¾ã—ãŸ', 'error');
                    document.getElementById('testResult').innerHTML = `
                        <strong>ã™ã¹ã¦ã®è©¦è¡ŒãŒå¤±æ•—ã—ã¾ã—ãŸ</strong><br>
                        <p>æ ¹æœ¬çš„ãªè§£æ±ºãŒå¿…è¦ã§ã™:</p>
                        <ol>
                            <li><strong>ngrok</strong> ã‚’ä½¿ç”¨ã—ã¦HTTPSæ¥ç¶šã‚’ä½œæˆ</li>
                            <li><strong>Chrome</strong> ã®è¨­å®šã§ localhost ã‚’ secure origins ã«è¿½åŠ </li>
                            <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒ</strong> ã‚’ç¢ºèªï¼ˆãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã€ãƒ—ãƒ­ã‚­ã‚·ï¼‰</li>
                        </ol>
                    `;
                    this.updateStatus('æ ¹æœ¬çš„ãªè§£æ±ºç­–ãŒå¿…è¦ã§ã™', 'error');
                    this.isRunning = false;
                    document.getElementById('stopTest').disabled = true;
                }
            }

            stopTest() {
                this.log('ãƒ†ã‚¹ãƒˆã‚’åœæ­¢ã—ã¾ã™');
                this.isRunning = false;
                if (this.recognition) {
                    this.recognition.stop();
                }
                document.getElementById('stopTest').disabled = true;
                this.updateStatus('ãƒ†ã‚¹ãƒˆãŒåœæ­¢ã•ã‚Œã¾ã—ãŸ', 'warning');
            }
        }

        function clearLog() {
            document.getElementById('log').innerHTML = 'ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ...\n';
        }

        // åˆæœŸåŒ–
        window.onload = () => {
            new NetworkFixTool();
            
            // ç¾åœ¨ã®æ¥ç¶šæƒ…å ±ã‚’è¡¨ç¤º
            const protocol = location.protocol;
            const hostname = location.hostname;
            const port = location.port;
            
            const logElement = document.getElementById('log');
            logElement.innerHTML += `<span style="color: #ffff00">ç¾åœ¨ã®æ¥ç¶š: ${protocol}//${hostname}:${port}</span>\n`;
            
            if (protocol === 'https:') {
                logElement.innerHTML += `<span style="color: #00ff00">âœ… HTTPSæ¥ç¶š - Network ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã«ãã„ã§ã™</span>\n`;
            } else {
                logElement.innerHTML += `<span style="color: #ff4444">âš ï¸ HTTPæ¥ç¶š - Network ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</span>\n`;
            }
        };
    </script>
</body>
</html>