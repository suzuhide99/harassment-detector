<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chromeè¨­å®šã§ Network ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .step { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 5px solid #007bff; }
        .step h3 { color: #007bff; margin-top: 0; }
        .code { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 10px; font-family: monospace; margin: 10px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 15px; color: #856404; margin: 15px 0; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; border-radius: 4px; padding: 15px; color: #155724; margin: 15px 0; }
        .button { display: inline-block; background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; text-decoration: none; cursor: pointer; margin: 5px; }
        .button:hover { background: #0056b3; }
        .button.success { background: #28a745; }
        .button.success:hover { background: #1e7e34; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Chromeè¨­å®šã§ Network ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£</h1>
        <p><strong>ngrok ã‚’ä½¿ã„ãŸããªã„å ´åˆ</strong>ã®ä»£æ›¿æ‰‹æ®µã¨ã—ã¦ã€Chrome ã®è¨­å®šã‚’å¤‰æ›´ã—ã¦ network ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã¾ã™ã€‚</p>

        <div class="warning">
            <strong>âš ï¸ æ³¨æ„:</strong> ã“ã®æ–¹æ³•ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆå¾Œã¯è¨­å®šã‚’å…ƒã«æˆ»ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
        </div>

        <!-- Step 1 -->
        <div class="step">
            <h3>ğŸ“‹ Step 1: Chrome Flags ã‚’é–‹ã</h3>
            <p>Chrome ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«ä»¥ä¸‹ã®URLã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹:</p>
            <div class="code">chrome://flags/</div>
            <a href="chrome://flags/" class="button" target="_blank">Chrome Flags ã‚’é–‹ã</a>
        </div>

        <!-- Step 2 -->
        <div class="step">
            <h3>ğŸ” Step 2: Insecure origins ã®è¨­å®šã‚’å¤‰æ›´</h3>
            <p>æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ä»¥ä¸‹ã‚’å…¥åŠ›:</p>
            <div class="code">Insecure origins treated as secure</div>
            <p>è¦‹ã¤ã‹ã£ãŸè¨­å®šã§ä»¥ä¸‹ã®URLã‚’è¿½åŠ :</p>
            <div class="code">http://localhost:8081</div>
            <p><strong>çŠ¶æ…‹ã‚’ "Enabled" ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚</strong></p>
        </div>

        <!-- Step 3 -->
        <div class="step">
            <h3>ğŸ”„ Step 3: Chrome ã‚’å†èµ·å‹•</h3>
            <p>è¨­å®šã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã€Chrome ã‚’å®Œå…¨ã«çµ‚äº†ã—ã¦å†èµ·å‹•ã—ã¦ãã ã•ã„:</p>
            <ol>
                <li>ã™ã¹ã¦ã®Chromeã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹</li>
                <li>Chrome ã‚’å†èµ·å‹•</li>
                <li>ã“ã®æ‰‹é †ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã‚’ãƒ†ã‚¹ãƒˆ:</li>
            </ol>
            <button id="testConnection" class="button success">æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <div id="testResult" style="margin-top: 10px;"></div>
        </div>

        <!-- Step 4 -->
        <div class="step">
            <h3>ğŸ¤ Step 4: éŸ³å£°èªè­˜ã‚’ãƒ†ã‚¹ãƒˆ</h3>
            <p>è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ãƒ‘ãƒ¯ãƒãƒ©æ¤œå‡ºã‚¢ãƒ—ãƒªã§éŸ³å£°èªè­˜ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„:</p>
            <a href="index.html" class="button success" target="_blank">ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã§ãƒ†ã‚¹ãƒˆ</a>
            <a href="advanced-voice-test.html" class="button" target="_blank">é«˜åº¦ãªãƒ†ã‚¹ãƒˆ</a>
        </div>

        <!-- è¿½åŠ ã®è¨­å®š -->
        <div class="step">
            <h3>âš™ï¸ Step 5: è¿½åŠ è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰</h3>
            <p>ä¸Šè¨˜ã§è§£æ±ºã—ãªã„å ´åˆã€ä»¥ä¸‹ã®è¨­å®šã‚‚è©¦ã—ã¦ãã ã•ã„:</p>
            <div class="code">chrome://flags/</div>
            <p>ä»¥ä¸‹ã®è¨­å®šã‚‚ "Enabled" ã«ã™ã‚‹:</p>
            <ul>
                <li><strong>Experimental Web Platform features</strong></li>
                <li><strong>Web Speech API</strong> (å­˜åœ¨ã™ã‚‹å ´åˆ)</li>
            </ul>
        </div>

        <!-- å…ƒã«æˆ»ã™æ–¹æ³• -->
        <div class="step">
            <h3>ğŸ”™ è¨­å®šã‚’å…ƒã«æˆ»ã™æ–¹æ³•</h3>
            <p>ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚è¨­å®šã‚’å…ƒã«æˆ»ã—ã¦ãã ã•ã„:</p>
            <ol>
                <li><code>chrome://flags/</code> ã‚’å†åº¦é–‹ã</li>
                <li><strong>Insecure origins treated as secure</strong> ã‚’æ¤œç´¢</li>
                <li>è¿½åŠ ã—ãŸURLã‚’å‰Šé™¤</li>
                <li>è¨­å®šã‚’ "Default" ã«æˆ»ã™</li>
                <li>Chrome ã‚’å†èµ·å‹•</li>
            </ol>
        </div>

        <div class="success">
            <strong>âœ… æˆåŠŸã—ãŸå ´åˆ:</strong> éŸ³å£°èªè­˜ã® network ã‚¨ãƒ©ãƒ¼ãŒè§£æ±ºã•ã‚Œã€æ­£å¸¸ã«ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
        </div>

        <div class="warning">
            <strong>ğŸš« ã“ã®æ–¹æ³•ã§ã‚‚è§£æ±ºã—ãªã„å ´åˆ:</strong><br>
            <a href="setup-https.sh" class="button" download>HTTPS ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>ã—ã¦ ngrok ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ã“ã‚ŒãŒæœ€ã‚‚ç¢ºå®Ÿãªè§£æ±ºæ–¹æ³•ã§ã™ã€‚
        </div>
    </div>

    <script>
        document.getElementById('testConnection').addEventListener('click', function() {
            const testResult = document.getElementById('testResult');
            
            // æ¥ç¶šãƒ†ã‚¹ãƒˆ
            testResult.innerHTML = '<p>ğŸ”„ ãƒ†ã‚¹ãƒˆä¸­...</p>';
            
            // ç¾åœ¨ã®æ¥ç¶šæƒ…å ±ã‚’ãƒã‚§ãƒƒã‚¯
            const protocol = window.location.protocol;
            const hostname = window.location.hostname;
            const port = window.location.port;
            
            if (protocol === 'https:') {
                testResult.innerHTML = `
                    <div class="success">
                        âœ… <strong>HTTPSæ¥ç¶šã§ã™</strong><br>
                        Network ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚
                    </div>
                `;
            } else if (hostname === 'localhost' || hostname === '127.0.0.1') {
                // Web Speech API ãŒåˆ©ç”¨å¯èƒ½ã‹ãƒ†ã‚¹ãƒˆ
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    testResult.innerHTML = `
                        <div class="success">
                            âœ… <strong>éŸ³å£°èªè­˜APIãŒåˆ©ç”¨å¯èƒ½ã§ã™</strong><br>
                            è¨­å®š: ${protocol}//${hostname}:${port}<br>
                            Chromeè¨­å®šãŒæ­£ã—ãé©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
                        </div>
                    `;
                } else {
                    testResult.innerHTML = `
                        <div class="warning">
                            âš ï¸ <strong>éŸ³å£°èªè­˜APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“</strong><br>
                            Chrome ã®å†èµ·å‹•ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
                        </div>
                    `;
                }
            } else {
                testResult.innerHTML = `
                    <div class="warning">
                        âš ï¸ <strong>localhost ä»¥å¤–ã®æ¥ç¶šã§ã™</strong><br>
                        ã“ã®è¨­å®šæ–¹æ³•ã¯ localhost ã§ã®ã¿æœ‰åŠ¹ã§ã™ã€‚
                    </div>
                `;
            }
        });
    </script>
</body>
</html>